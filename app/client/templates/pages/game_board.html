{% extends 'layouts/main.html' %}
{% block title %}Home{% endblock %}
{% block content %}

<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script>
  $("#search_form_input").keyup(function(){
      var text = $(this).val();

      $.ajax({
        url: "/game",
        type: "post",
        data: {jsdata: text},
        success: function(response) {
          $("#move").html(response);
        }
      });
  });
  </script>
</head>

<div class="page-header">
  <h1>The Classic Mystery Game</h1>
</div>

<div>
    <p class="lead">It's your turn, player {{current_player}}</p>
</div>

<div>
    {% if suggestion_message %}
       <p class="lead">{{suggestion_message}}</p>
    {% endif %}
</div>

<div>
    {% if accusation_message is not none %}
       <p class="lead">{{accusation_message}}</p>
    {% endif %}
</div>

<table class="table table-striped">
    {% for row in game_board %}
        <tr>
        {% for position in row %}
            {% if position != 'x' %}
                <td align="center">{{ position }}</td>
            {% else %}
                <td></td>
            {% endif %}
        {% endfor %}
       </tr>
    {% endfor %}
</table>

<form method="post" class="move_form form-reset">
    <h3 class="form-heading">Move Player</h3>
    {{ move_form.x_coordinate(class_ = 'form-control first-input last-input', placeholder = move_form.x_coordinate.label.text) }}
    {{ move_form.y_coordinate(class_ = 'form-control first-input last-input', placeholder = move_form.y_coordinate.label.text) }}
    <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-block">
    {{ move_form.hidden_tag() }}
</form>

<form method="post" class="suggestion_form form-reset">
    <h3 class="form-heading">Make Suggestion</h3>
    {{ suggestion_form.character_id(class_ = 'form-control first-input last-input', placeholder = suggestion_form.character_id.label.text) }}
    {{ suggestion_form.weapon_id(class_ = 'form-control first-input last-input', placeholder = suggestion_form.weapon_id.label.text) }}
    {{ suggestion_form.room_id(class_ = 'form-control first-input last-input', placeholder = suggestion_form.room_id.label.text) }}
    {{ suggestion_form.is_accusation(class_ = 'form-control first-input last-input', placeholder = suggestion_form.is_accusation.label.text) }}

    {% if suggestion_message %}
        <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-block" disabled>
    {% else %}
        <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-block">
    {% endif %}

    {{ suggestion_form.hidden_tag() }}
</form>

{% endblock %}
